<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <title>Admin Page</title>
  <style>
    #current-time {
      font-size: 1.2rem;
      font-weight: bold;
      color: #333;
      text-align: right;
    }

    .dark-mode {
      background-color: #1a1a1a;
      color: #fff;
    }

    .dark-mode .table {
      color: #fff;
    }
    
    .dark-mode .table-striped>tbody>tr:nth-of-type(odd)>* {
      --bs-table-accent-bg: var(--bs-table-striped-bg);
      color: var(--bs-table-striped-color, #fff);
    }

    .dark-mode h3, .dark-mode #current-time {
        color: #fff;
    }
  </style>
</head>
<body>
   <!-- // 부트스트랩 클래스, 위쪽 여백(margin top) -->
  <div class="container mt-3">         

    <!-- 다크모드 테마 변경, 회원가입 버튼 -->
    <button id="darkModeToggle" class="btn btsn-secondary mt-3">다크 모드</button>
    <!-- 부트스트랩 클래스, join.html 링크 -->
    <a href="join.html" class="btn btn-primary mt-3">회원가입</a>     
    <!-- // 실시간 현재 시간 표시 , updateTime 함수 연결    -->
    <h1 id="current-time" class="mt-5 mb-3"></h1>                     
    <h3 class="mt-5 mb-3">신규 등록 상품</h3>

    <!-- // 카테고리 선택, 성별 선택, 상품 검색, 조회 버튼, col-12 화면 너비 꽉차게 -->
    <form id="searchForm" class="row g-3 align-items-center">      
      <div class="col-auto">
        <label class="visually-hidden" for="inlineFormSelectPref">Preference</label>
        <select class="form-select" id="inlineFormSelectPref" name="category_data_table">
            <option selected>카테고리 선택</option>
            <option value="상의">상의</option>
            <option value="하의">하의</option>
            <option value="신발">신발</option>
            <option value="패션잡화">패션잡화</option>
                      <!-- 셀렉트요소의 name="category_data_table"은 지우거나 변경하면 안돼요 -->
          <!-- 카테고리 셀렉트 코드를 넣어주세요 -->
        </select>

      </div>
      <!-- // 성별 선택, 선택만.. -->
      <div class="col-auto">
        <label class="visually-hidden" for="genderSelect">성별</label>
        <select class="form-select" id="genderSelect">
          <option selected>성별 선택</option>
          <option value="male">남성</option>
          <option value="female">여성</option>
          <option value="unisex">공용</option>
        </select>
      </div>

      <!-- // 조회창 -->
      <div class="col">
        <label class="visually-hidden" for="search_input">상품 검색</label>
        <input type="text" class="form-control" id="search_input" placeholder="“제품명을 입력해주세요”">
      </div>

      <!-- // 조회 버튼 (submit) <i> 돋보기모양 -->
      <div class="col-auto">
        <button type="submit" class="btn btn-primary" >
            <i class="bi bi-search"></i> 조회
        </button>

      </div>
    </form>

    <!-- // 상품 목록 테이블 -->
    <div class="container mt-3">
      <!-- // 부트스트랩 클래스 디자인 -->
      <table class="table table-striped table-hover table-sm"> 
        <thead class="table-dark">
            <!-- //열 -->
            <tr>                                            
                <th scope="col">#</th>
                <th scope="col">카테고리</th>
                <th scope="col">브랜드</th>
                <th scope="col">상품명</th>
                <th scope="col">가격</th>
            </tr>
          <!-- 열의 속성값을 나타내는 코드를 작성해주세요 (예 : 카테고리, 브랜드, 상품명, 가격) -->
        </thead>
        <tbody id="product_data_Table">
          <!-- 제품 데이터가 여기 추가됩니다. -->
        </tbody>
      </table>
    </div>
    <!-- 페이지 네이션 코드 -->
     <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-4">
      <ul class="pagination">
        <li class="page-item disabled"><a class="page-link" href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
      </ul>
    </nav>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
        crossorigin="anonymous"></script>

    <script>
    // 제품 데이터 , 젠더 없네 ,,,
    const product_data = [
      { category: "상의", brand: 'Supreme', product: '슈프림 박스로고 후드티', price: '390,000' },
      { category: "하의", brand: 'DIESEL', product: '디젤 트랙 팬츠', price: '188,000' },
      { category: "신발", brand: 'Nike', product: '에어포스 1', price: '137,000' },
      { category: "패션잡화", brand: 'Music&Goods', product: '빵빵이 키링', price: '29,000' },
      { category: "상의", brand: 'ADER error', product: '아더에러 23SS 티셔츠', price: '110,000' },
      { category: "하의", brand: 'Levi\'s', product: '리바이스 501 오리지널 진', price: '95,000' },
      { category: "신발", brand: 'Adidas', product: '아디다스 가젤', price: '109,000' },
      { category: "패션잡화", brand: 'Louis Vuitton', product: '루이비통 모노그램 지갑', price: '780,000' },
      { category: "상의", brand: 'Adidas', product: '저지 상의', price: '110,000' },
      { category: "하의", brand: 'Adidas', product: '하의', price: '95,000' },
      { category: "신발", brand: 'Adidas', product: '아디다스 가젤', price: '109,000' },
      { category: "패션잡화", brand: 'Adidas', product: '힙색', price: '60,000' },
      { category: "상의", brand: 'NewBalance', product: '뉴발란스 템1', price: '110,000' },
      { category: "하의", brand: 'NewBalance', product: '뉴발란스 템2', price: '95,000' },
      { category: "신발", brand: 'NewBalance', product: '뉴발란스 템3', price: '109,000' },
      { category: "패션잡화", brand: 'NewBalance', product: '뉴발란스 템4', price: '180,000' },
    ];
 
    // id = product_data_Table인 데이터 제품 테이블에 추가
    const product_data_Table = document.getElementById('product_data_Table');

    function loadProductData(data){
        product_data_Table.innerHTML = '';              //테이블 내용 초기화

        if (data.length === 0){
            const row = product_data_Table.insertRow();
            const cell = row.insertCell(0);
            cell.innerHTML = `<tr><td colspan="5" class= "text-center py-4 text-muted">조회된 상품 데이터가 없습니다.</td></tr>`

        } else {
            data.forEach((item, index)  => {            // 테이블 순환
                const row = product_data_Table.insertRow();     // 챙(tr) 추가
                row.insertCell(0).innerHTML = index + 1;        // 셀(td) 추가
                row.insertCell(1).innerHTML = item.category;
                row.insertCell(2).innerHTML = item.brand;
                row.insertCell(3).innerHTML = item.product;
                row.insertCell(4).innerHTML = item.price;
            });
        }
    }

    loadProductData(product_data);                      //product_data 받아서 테이블 만들어

    const searchForm = document.querySelector('form');  // 폼 제출 이벤트 처리, form 선택해 변수에 저장

    searchForm.addEventListener('submit', function(event){  //submit 이벤트 발생시 {}코드 실행
        event.preventDefault();                         // submit 시 새로고침 방지
        //id로 카테고리 선택, 상품검색 립력 value
        const selectedCategory = document.getElementById('inlineFormSelectPref').value;        //selectedCategory에 값 가져오기
        const searchKeyword = document.getElementById('search_input').value.toLowerCase();
    
        
        //조건 만족하면 filteredData 배열에
        const filteredData = product_data.filter(item => {
            //카테고리 조건 맞는지
            const categoryMatch = selectedCategory === '카테고리 선택' || item.category === selectedCategory;
            //검색어 조건 맞는지
            const keywordMatch = item.product.toLowerCase().includes(searchKeyword) || item.brand.toLowerCase().includes(searchKeyword);
            
            return categoryMatch && keywordMatch;         // 두 조건 모두 만족시 리턴
        });

        loadProductData(filteredData);                  // filteredData를 함수에 전달, 다시 그려

        console.log(`조회 완료: 카테고리[${selectedCategory}], 키워드 [${searchKeyword}], ${filteredData.length}개 상품`);
    
    
    });

  </script>

  <script>
    function updateTime() {
      const currentTimeElement = document.getElementById('current-time');
      const now = new Date();
      const options = {
        year: 'numeric', month: 'long', day: 'numeric',
        hour: 'numeric', minute: 'numeric', second: 'numeric',
        hour12: false
      };
      currentTimeElement.textContent = now.toLocaleString('ko-KR', options);
    }

    updateTime();
    setInterval(updateTime, 1000);

    const darkModeToggle = document.getElementById('darkModeToggle');
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
    });
  </script>
 
</body>
</html>